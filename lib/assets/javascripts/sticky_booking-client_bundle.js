webpackJsonp([1],{282:function(e,n,t){e.exports=t(283)},283:function(e,n,t){"use strict";t(284);var o=t(46);t(487),t(489),t(491),t(70),t(494),t(137),t(497),t(498),t(499),o.module("StickyBooking",["angularSpinner","ngAnimate","ngSanitize"]),t(500),o.element(function(){o.bootstrap(document,["StickyBooking"])})},499:function(e,n){},500:function(e,n,t){"use strict";var o=t(46);t(70),t(1);t(256);t(51);t(503),t(505),t(507),t(509);var a=t(584);o.module("StickyBooking").component("occsnApp",{templateUrl:a,controller:["$scope",function(e){this.$onInit=function(){e.$on("initialDataLoaded",function(n,t){e.merchant=t.merchant,e.product=t.product,document.title=t.product.title}),e.$on("orderDataLoaded",function(n,t){e.order=t.order})}}]})},503:function(e,n,t){"use strict";var o=t(46),a=t(70),r=t(1);t(256);var i=t(51),s=t(504);o.module("StickyBooking").component("bookingPage",{templateUrl:s,controller:["$scope","$http","$filter","$window","occasionSDKService",function(e,n,t,s,l){this.$onInit=function(){console.log("Booking Component Init"),e.displayLoading=!0,e.initialDataLoaded=!1,e.calendarDataLoaded=!1,e.orderLoaded=!1,e.staticProductID=window.OCCSN.product_id,e.orderErrors=null,e.activeRedeemable=null,e.redeemableError=null,e.redeemableStatus=null,e.showNav=!1,e.submitting=!1,e.maxStep=0,e.step=0,o.element(s).bind("scroll",function(){this.pageYOffset>100&&(e.showNav=!0,e.$apply())}),e.loadInitialData()},e.loadInitialData=function(){e.merchant=null,e.product=null,Promise.all([l.getMyMerchant(),l.getProductById(e.staticProductID)]).then(function(n){var t=n[0],o=n[1];e.merchant=t,e.product=o,e.psp=t.pspName,r.tz.setDefault(t.timeZone),i.isNull(o.firstTimeSlotStartsAt)&&alert("Listing has no timeslots. If you are the merchant who owns this listing, add time slots so that there are times that can be booked."),e.$broadcast("initialDataLoaded",{product:o}),e.$emit("initialDataLoaded",{merchant:t,product:o}),e.initialDataLoaded=!0,e.displayLoading=!1,e.$apply(),l.createOrderForProduct(o).then(function(n){console.log("Order data loaded"),e.order=n,e.orderLoaded=!0,e.$emit("orderDataLoaded",{order:n})})}).catch(function(n){console.log(n),e.displayLoading=!1,e.$apply(),n instanceof TypeError?alert("There was an error retrieving the listing you're looking for. Please try again later."):n.map(function(e){alert(e.details)})})},e.$on("calendarDataLoaded",function(n,t){e.calendarDataLoaded=t.calendarDataLoaded,e.sessionDuration=t.duration.asHours(),1!=t.duration.asHours()?e.sessionDuration+=" hours":e.sessionDuration+=" hour"}),e.clickGoToStep=function(n){n<=e.maxStep&&e.goToStep(n)},e.goToStep=function(n){e.step=n,e.scrollToAnchor("step-"+n+"-scroller"),n>e.maxStep&&(e.maxStep=n)},e.getStarted=function(){e.displayLoading=!0,e.$watch("calendarDataLoaded",function(n){n&&(e.displayLoading=!1,e.goToStep(1))})},e.$on("dateSelectedEvent",function(n,t){e.selectedDate=t.selectedDate,e.availableSlots=t.availableTimeSlots,e.goToStep(2)}),e.$on("startLoading",function(n){e.displayLoading=!0}),e.$on("stopLoading",function(n){e.displayLoading=!1}),e.onTimeSlotSelection=function(n,t){n.preventDefault(),e.selectedTimeSlot=t,e.order.timeSlots().assign([e.selectedTimeSlot]),e.orderLoaded?e.startOrder():(e.displayLoading=!0,e.$watch("orderLoaded",function(n){n&&(e.displayLoading=!1,e.startOrder())}))},e.isActiveTimeSlot=function(n){var t=e.order.timeSlots().target().first();return!i.isUndefined(t)&&t.startsAt.isSame(n.startsAt)};var d=function(n){return t("currency")(n,e.merchant.currency().code)};e.answerForQuestion=function(n){return e.order.answers().target().detect(function(e){return e.question()==n})},e.titleForCheckbox=function(e){switch(e.formControl){case"checkbox":switch(e.category){case"price":switch(e.operation){case"add":return e.title+" ("+d(e.price)+")";case"multiply":return e.title+" ("+e.percentage+"% extra)"}break;case"discount":switch(e.operation){case"subtract":return e.title+" ("+d(e.price)+" off)";case"divide":return e.title+" ("+e.percentage+"% off)"}break;default:return e.title}break;case"waiver":return e.title}},e.titleForOption=function(e){var n=e.title;return e.price&&(n+=" ("+d(e.price)+")"),n},e.titleForSpinButton=function(e){var n=e.question().title;return e.question().price&&(n+=" "+e.value+" x "+d(e.question().price)+" = ",n+=d(parseFloat(e.question().price)*e.value)),e.question().max&&(n+=" (Max of "+e.question().max+")"),n},e.defaultOptionFor=function(e){return e.options().target().detect(function(e){return e.default})},e.optionableQuestionChanged=function(n,t){n.assignOption(t),e.answerChanged(n)},e.answerChanged=function(n){n.question().priceCalculating&&e.order.calculatePrice().then(function(n){console.log("Order after calc",e.order.attributes()),e.$apply()}).catch(function(e){console.log("Error with recalc",e)})},e.hasSubtotal=function(){return!e.product.free&&parseFloat(e.order.subtotal)>0},e.requiresPayment=function(){return e.hasSubtotal()&&parseFloat(e.order.outstandingBalance)>0},e.startOrder=function(){e.optionsHolder={},e.goToStep(3),e.order.calculatePrice().then(function(n){console.log("Order after first calc",e.order.attributes()),"spreedly"==e.psp&&(console.log("Use Spreedly"),e.useSpreedly()),"square"==e.psp&&(console.log("Use Square"),e.useSquare()),e.$apply()}).catch(function(e){console.log("Error from calc start price",e)})},e.useSquare=function(){e.paymentForm=new SqPaymentForm({applicationId:window.OCCSN.square_key,inputClass:"form-control",inputStyles:[{fontSize:"19px"}],cardNumber:{elementId:"sq-card-number",placeholder:"•••• •••• •••• ••••"},cvv:{elementId:"sq-cvv",placeholder:"CVV"},expirationDate:{elementId:"sq-expiration-date",placeholder:"MM/YY"},postalCode:{elementId:"sq-postal-code",placeholder:"#####"},callbacks:{methodsSupported:function(e){var n=document.getElementById("sq-apple-pay"),t=document.getElementById("sq-apple-pay-label"),o=document.getElementById("sq-masterpass"),a=document.getElementById("sq-masterpass-label");n.style.display="none",t.style.display="none",o.style.display="none",a.style.display="none"},cardNonceResponseReceived:function(n,t,o){n?(e.orderErrors=n,e.submitting=!1,e.$apply(),console.log("Encountered errors:"),n.forEach(function(e){console.log(e)})):(e.creditCard=l.buildCard(t),console.log("CARD",e.creditCard),e.order.charge(e.creditCard,e.order.outstandingBalance),e.order.calculatePrice().then(function(n){e.submitOrder()}).catch(function(e){console.log("Errors with final calc price",e)}))},unsupportedBrowserDetected:function(){},inputEventReceived:function(e){switch(e.eventType){case"focusClassAdded":case"focusClassRemoved":break;case"errorClassAdded":console.log("Error class added");break;case"errorClassRemoved":console.log("Error class removed")}},paymentFormLoaded:function(){console.log("Form loaded")}}}),e.paymentForm.build()},e.useSpreedly=function(){Spreedly.init(window.OCCSN.spreedly_key,{numberEl:"spreedly-number",cvvEl:"spreedly-cvv"}),Spreedly.on("ready",function(){Spreedly.setFieldType("number","text"),Spreedly.setNumberFormat("prettyFormat"),Spreedly.setPlaceholder("number","Card Number"),Spreedly.setPlaceholder("cvv","CVV"),Spreedly.setStyle("number","display: block; width: 95%; height: 36px; padding: 6px 12px; font-size: 16px; line-height: 1.428571429; color: #7b829a; background-color: #fff; background-image: none; border: 1px solid #ccc; -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075); box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075); -webkit-transition: border-color ease-in-out 0.15s, box-shadow ease-in-out 0.15s; -o-transition: border-color ease-in-out 0.15s, box-shadow ease-in-out 0.15s; transition: border-color ease-in-out 0.15s, box-shadow ease-in-out 0.15s;"),Spreedly.setStyle("cvv","display: block; width: 60px; height: 36px; padding: 6px 12px; font-size: 16px; line-height: 1.428571429; color: #7b829a; background-color: #fff; background-image: none; border: 1px solid #ccc; -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075); box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075); -webkit-transition: border-color ease-in-out 0.15s, box-shadow ease-in-out 0.15s; -o-transition: border-color ease-in-out 0.15s, box-shadow ease-in-out 0.15s; transition: border-color ease-in-out 0.15s, box-shadow ease-in-out 0.15s;")}),Spreedly.on("fieldEvent",function(e,n,t,o){"focus"==n&&Spreedly.setStyle(e,"border-color: #66afe9; outline: 0; -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075), 0 0 8px rgba(102, 175, 233, 0.6); box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075), 0 0 8px rgba(102, 175, 233, 0.6)"),"blur"==n&&Spreedly.setStyle(e,"border: 1px solid #ccc; -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075); box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075); -webkit-transition: border-color ease-in-out 0.15s, box-shadow ease-in-out 0.15s; -o-transition: border-color ease-in-out 0.15s, box-shadow ease-in-out 0.15s; transition: border-color ease-in-out 0.15s, box-shadow ease-in-out 0.15s;")}),Spreedly.on("errors",function(n){console.log("Spreedly On Errors",n),e.orderErrors=n,e.submitting=!1,e.$apply()}),Spreedly.on("paymentMethod",function(n,t){e.creditCard=l.buildCard(n),e.order.charge(e.creditCard,e.order.outstandingBalance),e.order.calculatePrice().then(function(n){e.submitOrder()}).catch(function(e){console.log("Errors with final calc price",e)})})},e.checkRedeemable=function(){e.displayLoading=!0,e.redeemableError=null,e.activeRedeemable=null;var n=document.getElementById("redeemableInput").value;e.product.redeemables().findBy({code:n}).then(function(n){console.log("Redeemable",n);var t=l.redeemableType(n);switch(e.activeRedeemable=n,console.log("Attr",e.activeRedeemable.attributes()),e.displayLoading=!1,document.getElementById("redeemableInput").disabled=!0,t){case"card":var o=parseFloat(e.activeRedeemable.value),a=parseFloat(e.order.outstandingBalance);o>a&&(o=a),e.order.charge(e.activeRedeemable,o),e.redeemableStatus="Gift Card Applied! - "+e.merchant.currency().code+o+" Applied";break;case"coupon":e.order.assignCoupon(e.activeRedeemable),null!=e.activeRedeemable.attributes().discountFixed&&(e.redeemableStatus="Coupon Applied! - "+e.merchant.currency().code+e.activeRedeemable.discountFixed+" Off"),null!=e.activeRedeemable.attributes().discountPercentage&&(e.redeemableStatus="Coupon Applied! - "+e.activeRedeemable.attributes().discountPercentage+"% Off")}e.order.calculatePrice().then(function(n){console.log("Order after calc after redeem",n),e.$apply()}).catch(function(e){console.log("Error after calc after redeem",e)})}).catch(function(n){e.displayLoading=!1,n.map(function(n){e.redeemableStatus=null,e.redeemableError=n.details}),document.getElementById("redeemableInput").value=null,e.$apply()})},e.removeRedeemable=function(){switch(e.displayLoading=!0,l.redeemableType(e.activeRedeemable)){case"card":e.order.removeCharge(e.activeRedeemable);break;case"coupon":e.order.assignCoupon(null)}e.activeRedeemable=null,e.redeemableStatus=null,e.redeemableError=null,document.getElementById("redeemableInput").value=null,document.getElementById("redeemableInput").disabled=!1,e.order.calculatePrice().then(function(n){console.log("Order after calc after remove redeem",n),e.displayLoading=!1,e.$apply()}).catch(function(n){console.log("Error after calc after remove redeem",n),e.displayLoading=!1})},e.submitPaymentForms=function(){if(e.submitting=!0,e.orderErrors=null,e.requiresPayment())switch(e.psp){case"cash":e.submitOrder();break;case"square":e.submitSquareForm();break;case"spreedly":e.submitSpreedlyForm()}else e.submitOrder()},e.submitSquareForm=function(){e.paymentForm.requestCardNonce()},e.submitSpreedlyForm=function(){console.log("Submit payment form");var e={};e.full_name=document.getElementById("full_name").value,e.month=document.getElementById("month").value,e.year=document.getElementById("year").value,Spreedly.tokenizeCreditCard(e)},e.submitOrder=function(){e.order.save(function(){e.submitting=!1,e.order.persisted()?e.$emit("orderDataLoaded",{order:e.order}):(e.orderErrors=e.order.errors().toArray(),e.order.removeCharge(e.creditCard)),e.$apply()})},e.scrollToAnchor=function(e){var n=a("a[name='"+e+"']");a("html, body").animate({scrollTop:n.offset().top},"slow")},e.formatToTime=function(e){return r(e).format("LT")},e.formatToDate=function(e){return r(e).format("MMMM DD, YYYY")},e.formatToFullDatetime=function(e){return r(e).format("dddd MMMM Do, YYYY h:mm A")},e.splitByTimeOfDay=function(e,n){switch(n){case"morning":return e.startsAt.hour()<12;case"afternoon":return e.startsAt.hour()>=12&&e.startsAt.hour()<18;case"evening":return e.startsAt.hour()>=18}}}]})},504:function(e,n){var t="/Users/nicklandgrebe/dev/StickyBooking/src/components/booking/booking.component.nghtml";window.angular.module("ng").run(["$templateCache",function(e){e.put(t,'<main class="booking-page-container">\n\n    <div class="loadingAnimation" ng-if="displayLoading">\n        <span us-spinner="{ color: \'#fff\' }"></span>\n    </div>\n\n    <div class="booking-sidebar" ng-if="initialDataLoaded" ng-class=\'{ "booking-sidebar-hidden": !showNav && step == 0 }\'>\n        <div ng-if="product.status == \'active\'">\n            <ol class="booking-process" id="booking-process-status">\n                <li class="booking-step" ng-class=\'{ "booking-step-active": step == 1, "booking-step-complete": step > 1 }\'>\n                  <a href ng-click=\'clickGoToStep(1)\'>Select a Date</a>\n                </li>\n                <li class="booking-step" ng-class=\'{ "booking-step-active": step == 2, "booking-step-complete": step > 2 }\'>\n                  <a href ng-click=\'clickGoToStep(2)\'>Select a Time</a>\n                </li>\n                <li class="booking-step" ng-class=\'{ "booking-step-active": step == 3, "booking-step-complete": step > 3 }\'>\n                  <a href ng-click=\'clickGoToStep(3)\'>Your Information</a>\n                </li>\n            </ol>\n        </div>\n    </div>\n  \n    <div class="booking-content">\n        <div class="booking-page-intro">\n          <h2 class="booking-page-photographer-name">{{ merchant.name }}</h2>\n          <div ng-if="product.status == \'active\'">\n              <div class="booking-page-welcome-message">\n                <ng-bind-html ng-bind-html="product.description"></ng-bind-html>\n              </div>\n          </div>\n          <div ng-if="product.status != \'active\'">\n              <div class="booking-page-welcome-message animated slideInLeft">\n                  <p ng-if="product.status == \'expired\'">\n                      The last time slot of this product has expired, so no bookings are\n                      currently accepted. Please contact the merchant if you think this is in error.\n                  </p>\n                  <p ng-if="product.status == \'inactive\'">\n                      This listing is no longer available for sale. Please contact the\n                      merchant if you think this is may be an error.\n                  </p>\n                  <p ng-if="product.status == \'sold_out\'">This listing has sold out.</p>\n              </div>\n          </div>\n        </div>\n\n        \x3c!--Get Started section --\x3e\n        <div class="booking-page-hero" style="background-image: url(\'{{ product.image.url }}\');">\n            <div class="booking-page-hero-content animated slideInRight" ng-if="initialDataLoaded">\n                <h6 class="get-started-title">Get Started</h6>\n                <h1 class="page-title">{{ product.title }}</h1>\n                <h6 ng-if=\'sessionDuration\' class="session-length">\n                  Session Length: {{ sessionDuration }}\n                </h6>\n\n                <button class="get-started tada infinite"\n                        ng-click="getStarted()"\n                        ng-class="{ animated: product.status == \'active\' }"\n                        ng-disabled="product.status != \'active\'">\n\n                    <svg viewBox="686 482 141 141" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n                        <path d="M826.958984,552.5 C826.958984,513.586577 795.413423,482.041016 756.5,482.041016 C717.586577,482.041016 686.041016,513.586577 686.041016,552.5 C686.041016,591.413423 717.586577,622.958984 756.5,622.958984 C795.413423,622.958984 826.958984,591.413423 826.958984,552.5 Z M693.041016,552.5 C693.041016,517.452571 721.452571,489.041016 756.5,489.041016 C791.547429,489.041016 819.958984,517.452571 819.958984,552.5 C819.958984,587.547429 791.547429,615.958984 756.5,615.958984 C721.452571,615.958984 693.041016,587.547429 693.041016,552.5 Z M761.386839,585.043454 L789.042157,557.388135 C791.742872,554.688285 791.742872,550.310967 789.042157,547.611116 C786.346196,544.910834 781.964124,544.910834 779.268163,547.611116 L763.413455,563.463663 L763.413455,524.844307 C763.413455,521.025713 760.319517,517.930478 756.499626,517.930478 C752.680167,517.930478 749.585796,521.025713 749.585796,524.844307 L749.585796,563.463663 L733.731521,547.611116 C731.035127,544.910834 726.653488,544.910834 723.957094,547.611116 C722.604576,548.961041 721.930478,550.730118 721.930478,552.499626 C721.930478,554.269134 722.604576,556.03821 723.957094,557.388135 L751.612412,585.043454 C754.308806,587.743736 758.690878,587.743736 761.386839,585.043454 Z"\n                          stroke="none" fill="#FFFFFF" fill-rule="evenodd"></path>\n                    </svg>\n                </button>\n            </div>\n        </div>\n\n        <div class="panes">\n            \x3c!-- Calendar pane --\x3e\n            <a name="step-1-scroller"></a>\n            <div class="pane pane-calendar pane-active" id="step-2" ng-show=\'maxStep > 0\'>\n                <div class="row">\n                    <div class="col-md-6">\n                        <h6>Availability</h6>\n                        <h3>Select a date on the calendar below to view availability:</h3>\n                    </div>\n                    <div class="col-md-6">\n                        <div class="session-duration text-right">\n                            <h4 class="duration-count">{{ sessionDuration }}</h4>\n                            <h6>Session Duration</h6>\n                        </div>\n                    </div>\n                </div>\n                <hr />\n\n                <booking-calendar></booking-calendar>\n            </div>\n\n            \x3c!-- available times--\x3e\n            <a name="step-2-scroller"></a>\n            <div class="pane pane-available-times clearfix" ng-show=\'maxStep > 1\'>\n                <div class="col-md-12">\n                    <h6>Available Time Slots</h6>\n                    <h3>Select a time slot on {{ formatToDate(selectedDate) }} to continue booking:</h3>\n                    <hr />\n                </div>\n                <div class="col-md-4 time-slot-buttons">\n                    <h6>Morning</h6>\n                    <button class="btn btn-primary time-slot"\n                            ng-repeat="timeSlot in availableSlots.toArray()"\n                            ng-if="splitByTimeOfDay(timeSlot, \'morning\')"\n                            ng-click="onTimeSlotSelection($event, timeSlot)"\n                            ng-class=\'{ "time-slot-active": isActiveTimeSlot(timeSlot) }\'>\n\n                        {{ formatToTime(timeSlot.startsAt) }}\n                    </button>\n                </div>\n                <div class="col-md-4 time-slot-buttons">\n                    <h6>Afternoon</h6>\n                    <button class="btn btn-primary time-slot"\n                            ng-repeat="timeSlot in availableSlots.toArray()"\n                            ng-if="splitByTimeOfDay(timeSlot, \'afternoon\')"\n                            ng-click="onTimeSlotSelection($event, timeSlot)"\n                            ng-class=\'{ "time-slot-active": isActiveTimeSlot(timeSlot) }\'>\n\n                        {{ formatToTime(timeSlot.startsAt) }}\n                    </button>\n                </div>\n                <div class="col-md-4 time-slot-buttons">\n                    <h6>Evening</h6>\n                    <button class="btn btn-primary time-slot"\n                            ng-repeat="timeSlot in availableSlots.toArray()"\n                            ng-if="splitByTimeOfDay(timeSlot, \'evening\')"\n                            ng-click="onTimeSlotSelection($event, timeSlot)"\n                            ng-class=\'{ "time-slot-active": isActiveTimeSlot(timeSlot) }\'>\n\n                        {{ formatToTime(timeSlot.startsAt) }}\n                    </button>\n                </div>\n            </div>\n\n            \x3c!--Customer information pane --\x3e\n            <a name="step-3-scroller"></a>\n            <div class="pane pane-customer-information" ng-show=\'maxStep > 2\'>\n                <h6>Your Info</h6>\n                <h3>We need to collect some information from you to confirm booking:</h3>\n                <hr />\n\n                \x3c!-- Question Form --\x3e\n                <form id="questionForm" ng-submit="submitPaymentForms()">\n                    \x3c!-- Static Questions, Always Required --\x3e\n                    <div class="form-group">\n                        <label class="control-label" for="order_customer_email">First Name*</label>\n                        <input id="lastName" placeholder="First Name" required="required" type="text" ng-model="order.customer().firstName" name="firstName"\n                            class="form-control" autofocus><span class="message"></span>\n                    </div>\n                    <div class="form-group">\n                        <label class="control-label" for="order_customer_email">Last Name*</label>\n                        <input id="firstName" placeholder="Last Name" required="required" type="text" ng-model="order.customer().lastName" name="lastName"\n                            class="form-control"><span class="message"></span>\n                    </div>\n                    <div class="form-group">\n                        <label class="control-label" for="order_customer_email">E-mail Address*</label>\n                        <input id="email" placeholder="E-mail" required="required" type="email" ng-model="order.customer().email" name="email" class="form-control">\n                        <span class="message"></span>\n                    </div>\n                    <div class="form-group">\n                        <label class="control-label" for="order_customer_email">Zip Code*</label>\n                        <input id="zip" placeholder="Zip Code" required="required" type="text" ng-model="order.customer().zip" name="zip" class="form-control">\n                        <span class="message"></span>\n                    </div>\n                    \x3c!-- End of Static Questions --\x3e\n\n                    \x3c!-- Dynamic Questions, Set by Merchant --\x3e\n                    <div ng-repeat="(index, question) in product.questions().toArray()" ng-init="answer = answerForQuestion(question)">\n                        <div class="form-group" ng-if="question.formControl != \'separator\'">\n                            <label ng-if="question.formControl == \'text_input\' || question.formControl == \'text_area\' || question.formControl == \'option_list\' || question.formControl == \'drop_down\'">\n                                {{ question.title }}<span ng-if=\'question.required\'>*</span>\n                            </label>\n                            \x3c!-- Render different from control based on answer.question.formControl type --\x3e\n                            \x3c!-- Text Input --\x3e\n                            <input class="form-control"\n                                   ng-if="question.formControl == \'text_input\'"\n                                   ng-model="answer.value"\n                                   ng-required="question.required"\n                                   placeholder="{{ question.title }}"\n                            />\n                            \x3c!-- Text Area --\x3e\n                            <textarea class="form-control" rows="4"\n                                      ng-if="question.formControl == \'text_area\'"\n                                      ng-model="answer.value"\n                                      ng-required="question.required"\n                                      placeholder="Your Response">\n                            </textarea>\n                            \x3c!-- Option List --\x3e\n                            <div ng-if="question.formControl == \'option_list\'">\n                                <span class="invisible"\n                                      ng-init="optionsHolder[question.id] = defaultOptionFor(question); optionableQuestionChanged(answer, optionsHolder[question.id])">\n                                </span>\n                                <label class="clickable-label"\n                                       ng-repeat="option in question.options().target().toArray()">\n                                    <input class="question-radio" type="radio"\n                                           name="{{question.id}}"\n                                           ng-value="option"\n                                           ng-model="optionsHolder[question.id]"\n                                           ng-change="optionableQuestionChanged(answer, optionsHolder[question.id])" />\n\n                                    {{ titleForOption(option) }}\n                                </label>\n                            </div>\n                            \x3c!-- Drop Down --\x3e\n                            <select class="form-control"\n                                    ng-if="question.formControl == \'drop_down\'"\n                                    ng-model="optionsHolder[question.id]"\n                                    ng-change="optionableQuestionChanged(answer, optionsHolder[question.id])"\n                                    ng-options="option as titleForOption(option) for option in question.options().target().toArray()"\n                                    ng-init="optionsHolder[question.id] = defaultOptionFor(question); optionableQuestionChanged(answer, optionsHolder[question.id])">\n\n                                <option value="">-- Please select --</option>\n                            </select>\n                            \x3c!-- Spin Button --\x3e\n                            <div ng-if="question.formControl == \'spin_button\'">\n                                <label>\n                                    <span>{{ titleForSpinButton(answer) }}</span>\n                                    <span ng-if=\'question.required\'>*</span>\n                                </label>\n                                <ul class="spinner-input list-inline">\n                                    <li>\n                                        <input class="form-control value-input" readonly=""\n                                               ng-model="answer.value"\n                                               ng-init="answer.value = question.min" />\n                                    </li>\n                                    <li>\n                                        <div class="btn-group btn-group-lg">\n                                            <button type="button" class="btn btn-info update-price stepper-minus"\n                                                    ng-click="answer.value = answer.value - 1; answerChanged(answer)"\n                                                    ng-disabled="answer.value == question.min">\n                                                -\n                                            </button>\n                                            <button type="button" class="btn btn-info update-price stepper-plus"\n                                                    ng-click="answer.value = answer.value + 1; answerChanged(answer)"\n                                                    ng-disabled="answer.value >= question.max">\n                                                +\n                                            </button>\n                                        </div>\n                                    </li>\n                                </ul>\n                            </div>\n                            \x3c!-- Checkbox && Waiver --\x3e\n                            <div ng-if="question.formControl == \'checkbox\' || question.formControl == \'waiver\'">\n                                <div class="well well-sm waiver" ng-if="question.formControl == \'waiver\'">\n                                    <ng-bind-html ng-bind-html="question.waiverText">\n                                    </ng-bind-html>\n                                </div>\n\n                                <label class="clickable-label">\n                                    <input class="question-checkbox" type="checkbox"\n                                           ng-model="answer.value"\n                                           ng-change="answerChanged(answer)"\n                                           ng-required="question.required || question.formControl == \'waiver\'"\n                                           ng-init="answer.value = false" />\n\n                                    <span>{{ titleForCheckbox(question) }}</span>\n                                    <span ng-if="question.required || question.formControl == \'waiver\'">*</span>\n                                </label>\n                            </div>\n                            \x3c!-- Text Output --\x3e\n                            <h3 class="question-text-output" ng-if="question.formControl == \'text_output\' && question.displayAsTitle">{{ question.title }}</h3>\n                            <p  class="question-text-output" ng-if="question.formControl == \'text_output\' && !question.displayAsTitle">{{ question.title }}</p>\n                        </div>\n                        <hr ng-if="question.formControl == \'separator\'">\n                    </div>\n                    \x3c!-- End of Dynamic Questions --\x3e\n\n                    \x3c!-- Price Table --\x3e\n                    <div class="alert priceTable" ng-if=\'hasSubtotal()\' ng-class="{ \'alert-warning\': psp == \'cash\', \'alert-success\': psp != \'cash\' }">\n                        <div ng-if="psp == \'cash\'">\n                            <strong>No payment required now. Payment will be collected at the venue.</strong>\n                            <br><br>\n                        </div>\n                        <table>\n                            <tr ng-if="order.subtotal != order.total">\n                                <td>Subtotal:</td>\n                                <td>{{ order.subtotal | currency:merchant.currency().code }}</td>\n                            </tr>\n                            <tr ng-if="order.tax != 0 && order.tax != null">\n                                <td>Tax:</td>\n                                <td>{{ order.tax | currency:merchant.currency().code }}</td>\n                            </tr>\n                            <tr ng-if="order.couponAmount != null">\n                                <td>Discount:</td>\n                                <td>-{{ order.couponAmount | currency:merchant.currency().code }}</td>\n                            </tr>\n                            <tr ng-class="{ \'borderTop\': order.subtotal != order.total }">\n                                <td><strong>Total:</strong></td>\n                                <td>{{ order.total | currency:merchant.currency().code }}</td>\n                            </tr>\n                            <tr ng-if="order.outstandingBalance != order.total">\n                                <td>Balance due:</td>\n                                <td>{{ order.outstandingBalance | currency:merchant.currency().code }}</td>\n                            </tr>\n                        </table>\n                    </div>\n                    \x3c!-- End Price Table --\x3e\n                    \x3c!-- Redeemables Section --\x3e\n                    <div id="redeemables" ng-if="product.hasRedeemables && hasSubtotal()">\n                        <br><br>\n                        <h3>Gift Cards & Coupons</h3>\n                        <hr>\n\n                        <div class="form-group hasButton">\n                            <label class="control-label" for="redeemableInput">Gift Card Number or Coupon Code</label>\n                            <input type="text" id="redeemableInput" name="redeemableInput" class="form-control" placeholder="Gift Card Number or Coupon Code" ng-model="redeemableInput" />\n                            <input type="button" class="btn-primary btn" ng-if="activeRedeemable == null" value="Check" ng-click="checkRedeemable()" />\n                            <input type="button" class="btn-danger btn" ng-if="activeRedeemable != null" value="Remove" ng-click="removeRedeemable()" />\n                            <p class="appliedStatus" ng-if="redeemableStatus != null">{{ redeemableStatus }}</p>\n                            <p class="appliedError" ng-if="redeemableError != null">{{ redeemableError }}</p>\n                        </div>\n                    </div>\n                    \x3c!-- End Redeemables Section --\x3e\n\n                    \x3c!-- Checkout Forms --\x3e\n                    <div ng-show=\'requiresPayment()\'>\n\n                        \x3c!-- Spreedly Checkout Form --\x3e\n                        <div id="payment-form" class="ccForm" ng-if="psp == \'spreedly\'">\n                            <h3>Pay with Card</h3>\n                            <hr>\n\n                            <input type="hidden" name="payment_method_token" id="payment_method_token">\n\n                            <div class="form-group">\n                                <label class="control-label" for="full_name">Name On Card</label>\n                                <input type="text" id="full_name" name="full_name" class="form-control" placeholder="Name On Card">\n                            </div>\n\n                            <div class="form-group">\n                                <label class="control-label">Credit Card Number</label>\n                                <div id="spreedly-number" class="spreedly-input"></div>\n                            </div>\n\n                            <div class="form-group">\n                                <label class="control-label" for="spreedly-exp-month">Expiration Date</label>\n                                <input type="text" id="month" name="month" maxlength="2" class="form-control" placeholder="MM">\n                                <input type="text" id="year" name="year" maxlength="4" class="form-control" placeholder="YYYY">\n                            </div>\n\n                            <div class="form-group">\n                                <label class="control-label">CVV</label>\n                                <div id="spreedly-cvv" class="spreedly-input"></div>\n                            </div>\n                        </div>\n                        \x3c!-- End Spreedly Checkout Form --\x3e\n\n                        \x3c!-- Square Checkout Form --\x3e\n                        <div id="sq-ccbox" ng-if="psp == \'square\'">\n                            <h3>Pay with Card</h3>\n                            <hr>\n\n                            <div class="form-group">\n                                <label class="control-label">Card Number:</label>\n                                <div id="sq-card-number"></div>\n                            </div>\n\n                            <div class="form-group">\n                                <label class="control-label">CVV:</label>\n                                <div id="sq-cvv"></div>\n                            </div>\n\n                            <div class="form-group">\n                                <label class="control-label">Expiration Date:</label>\n                                <div id="sq-expiration-date"></div>\n                            </div>\n\n                            <div class="form-group">\n                                <label class="control-label">Postal Code:</label>\n                                <div id="sq-postal-code"></div>\n                            </div>\n\n                            <input type="hidden" id="card-nonce" name="nonce">\n                        </div>\n                        <div id="sq-walletbox" ng-if="psp == \'square\'">\n                            <div id="sq-apple-pay-label" class="wallet-not-enabled">Apple Pay for Web not enabled</div>\n                            \x3c!-- Placholder for Apple Pay for Web button --\x3e\n                            <button id="sq-apple-pay" class="button-apple-pay"></button>\n\n                            <div id="sq-masterpass-label" class="wallet-not-enabled">Masterpass not enabled</div>\n                            \x3c!-- Placholder for Masterpass button --\x3e\n                            <button id="sq-masterpass" class="button-masterpass"></button>\n                        </div>\n                        \x3c!-- End Square Checkout Form --\x3e\n                    </div>\n                    \x3c!-- End Checkout Forms --\x3e\n\n                    \x3c!-- Errors Section --\x3e\n                    <div class="alert alert-danger" ng-if="orderErrors != null && orderErrors.length > 0">\n                        <h4>There were issues with your order:</h4>\n                        <ul>\n                            <li ng-repeat="(errorIndex, errorValue) in orderErrors">{{ errorValue.message }}</li>\n                        </ul>\n                    </div>\n                    \x3c!-- End Errors Section --\x3e\n\n                    \x3c!-- Order Submit --\x3e\n                    <div class="form-submit">\n                        <button type="submit" ng-disabled=\'submitting\' class="btn-primary btn animated pulse infinite finishButton">\n                            <span ng-if="!submitting">{{product.orderButtonText}}</span>\n                            <span ng-if="submitting" style="width: 30px; height: 30px;" us-spinner="{ color: \'#8e93a8\' }"></span>\n                        </button>\n                    </div>\n                    \x3c!-- End Order Submit --\x3e\n\n                </form>\n                \x3c!-- End Question Form --\x3e\n            </div>\n        </div>\n    </div>\n</main>\n')}]),e.exports=t},505:function(e,n,t){"use strict";var o=t(46),a=t(506);o.module("StickyBooking").component("completePage",{templateUrl:a,bindings:{order:"<"},controller:["$scope",function(e){this.$onInit=function(){e.order=this.order}}]})},506:function(e,n){var t="/Users/nicklandgrebe/dev/StickyBooking/src/components/booking/complete.component.nghtml";window.angular.module("ng").run(["$templateCache",function(e){e.put(t,'<main class="booking-confirm">\n  <div class="booking-confirmation-code">\n    <h6>Your Booking Number Is:</h6>\n    <h4>#{{ order.verificationCode }}</h4>\n  </div>\n  <div class="booking-confirmation-message">\n    <h3>Hello {{ order.customer().firstName }}, you are all set!</h3>\n    <p ng-if=\'product.postTransactionalMessage\'>{{ product.postTransactionalMessage }}</p>\n    <p ng-if=\'!product.postTransactionalMessage\'>Thank you for scheduling your consultation!</p>\n  </div>\n  <hr />\n  <div class="booking-confirmation-note">\n    <p><em>A confirmation email has been sent to {{ order.customer().email }}</em></p>\n  </div>\n</main>\n')}]),e.exports=t},507:function(e,n,t){"use strict";var o=t(46),a=t(70),r=t(1),i=t(137),s=i.extendMoment,l=t(51),d=t(508);r=s(r),o.module("StickyBooking").component("bookingCalendar",{templateUrl:d,controller:["$scope","occasionSDKService",function(e,n){e.setTimeSlotsForMonth=function(n,t){l.isUndefined(n)||(e.timeSlotsByMonth[n.format("MM-YYYY")]=t)},e.getTimeSlotsForMonth=function(n){if(!l.isUndefined(n))return e.timeSlotsByMonth[n.format("MM-YYYY")]},e.$on("initialDataLoaded",function(t,o){e.product=o.product;var a=e.product.firstTimeSlotStartsAt;e.activeCalendarMonth=a.startOf("month"),n.getTimeSlotsByMonth(e.product,a).then(function(n){e.setTimeSlotsForMonth(e.activeCalendarMonth,n),e.$emit("calendarDataLoaded",{calendarDataLoaded:!0,duration:r.duration(n.first().duration,"minutes")}),e.$apply()})}),this.$onInit=function(){e.calendarWeeks={},e.timeSlotsByMonth={}},e.getCalendarWeeksForMonth=function(n){if(!e.calendarWeeks[n.format("MM-YYYY")]){var t=r(n).startOf("month").startOf("week"),o=r(n).endOf("month").endOf("week"),a=[],i=0;l.each(Array.from(r.range(t,o).by("days")),function(e){0==e.day()?a[i]=[e]:a[i].push(e),6==e.day()&&i++}),e.calendarWeeks[n.format("MM-YYYY")]=a}return e.calendarWeeks[n.format("MM-YYYY")]},e.moveMonthAhead=function(){var n=r(e.activeCalendarMonth).add(1,"month");l.has(e.timeSlotsByMonth,n.format("MM-YYYY"))?e.activeCalendarMonth=n:e.getNewTimeSlots(n).then(function(){e.activeCalendarMonth=n,e.$apply()})},e.moveMonthBack=function(){e.activeCalendarMonth.subtract(1,"month")},e.canMoveMonthBack=function(){return e.activeCalendarMonth.isAfter(r(),"month")},e.getNewTimeSlots=function(t){return e.$emit("startLoading"),n.getTimeSlotsByMonth(e.product,t).then(function(n){console.log("Time slots by month",n),e.setTimeSlotsForMonth(t,n),e.$emit("stopLoading")}).catch(function(e){return console.log("Error",e)})},e.getDisplayClassForDay=function(n){if(n.isBefore(e.activeCalendarMonth)||n.isAfter(r(e.activeCalendarMonth).endOf("month")))return"empty-date";if(n.isBefore(r(),"day"))return"unavailable-day";var t=e.getTimeSlotsForMonth(e.activeCalendarMonth).detect(function(e){return n.isSame(e.startsAt,"day")});if(l.isUndefined(t))return"unavailable-day";var o="available-time-slot";return e.selectedDate&&e.selectedDate.isSame(n,"day")&&(o+=" selected-date"),o},e.onDateSelection=function(n){if("available-time-slot"==e.getDisplayClassForDay(n)){e.selectedDate=n;var t=e.getTimeSlotsForMonth(e.activeCalendarMonth).select(function(e){return e.startsAt.isSame(n,"day")});e.$emit("dateSelectedEvent",{selectedDate:e.selectedDate,availableTimeSlots:t})}},e.scrollToAnchor=function(e){var n=a("a[name='"+e+"']");a("html, body").animate({scrollTop:n.offset().top},"slow")}}]})},508:function(e,n){var t="/Users/nicklandgrebe/dev/StickyBooking/src/components/calendar/calendar.component.nghtml";window.angular.module("ng").run(["$templateCache",function(e){e.put(t,'<div ng-if=\'getTimeSlotsForMonth(activeCalendarMonth)\'>\n    <div class="row month-navigator">\n        <div class="col-xs-3">\n            <a class="btn btn-default"\n               ng-if="canMoveMonthBack()"\n               ng-click="moveMonthBack()">\n\n                <i class="fa fa-arrow-left" aria-hidden="true"></i>\n            </a>\n        </div>\n        <div class="col-xs-6 text-center">\n            <h6>{{ activeCalendarMonth.format(\'MMMM YYYY\') }}</h6>\n        </div>\n        <div class="col-xs-3 text-right">\n            <a class="btn btn-default" ng-click="moveMonthAhead()"><i class="fa fa-arrow-right" aria-hidden="true"></i></a>\n        </div>\n    </div>\n    <table class="calendar-table">\n        <thead>\n        <tr>\n            <td>S</td>\n            <td>M</td>\n            <td>T</td>\n            <td>W</td>\n            <td>T</td>\n            <td>F</td>\n            <td>S</td>\n        </tr>\n        </thead>\n        <tr></tr>\n        <tr class="calendar-dates" ng-repeat="(weekIndex, week) in getCalendarWeeksForMonth(activeCalendarMonth)">\n            <td ng-repeat="day in week" class="{{ getDisplayClassForDay(day) }}" ng-click="onDateSelection(day)">\n                <span class="date">\n                    {{ day.date() }}\n                </span>\n            </td>\n        </tr>\n    </table>\n</div>')}]),e.exports=t},509:function(e,n,t){"use strict";var o=t(257),a=t(46),r=t(1),i=t(583);a.module("StickyBooking").factory("occasionSDKService",["$q",function(e){var n=this;this.occsnKey=window.OCCSN.api_key;var t={token:this.occsnKey},a=window.OCCSN.host_url;return void 0!=a&&(t.baseUrl=o.prototype.Links.__constructLink(a,"api","v1")),this.occsn=new i.Client(t),this.occsn.Product.afterRequest(function(){null!=this.firstTimeSlotStartsAt&&(this.firstTimeSlotStartsAt=r(this.firstTimeSlotStartsAt))}),this.occsn.TimeSlot.afterRequest(function(){this.startsAt=r(this.startsAt)}),this.queryMyMerchant=e.when(this.occsn.Merchant.includes("currency").first()),this.queryTimeSlotsByMonth=function(e,n){var t=r(),a=n.isSame(t,"month")?t:n,i=a.clone().endOf("month"),s=Math.min(4,Math.ceil(i.diff(a,"days")/7));s<1&&(s=1);for(var l=0,d=[],c=a.clone(),u=a.clone().add(7,"days");l<s;)l+1==s&&(u=i),d.push(e.timeSlots().where({startsAt:{ge:c.toDate(),le:u.toDate()},status:"bookable"}).all()),c.add(7,"days"),u.add(7,"days"),l++;return Promise.all(d).then(function(e){return o.prototype.Collection.build(e).map(function(e){return e.toArray()}).flatten()})},this.queryProductById=function(n){return e.when(this.queryMyMerchant.then(function(e){return e.products().find(n)}))},this.queryToCreateOrderForProduct=function(n){return new e.when(this.occsn.Order.construct({product:n}))},this.queryBuildCard=function(e){return this.occsn.CreditCard.build({id:e})},this.queryRedeemableType=function(e){switch(e.klass()){case this.occsn.Coupon:return"coupon";case this.occsn.GiftCard:return"card"}},{getMyMerchant:function(){return n.queryMyMerchant},getProductById:function(e){return n.queryProductById(e)},getTimeSlotsByMonth:function(e,t){return n.queryTimeSlotsByMonth(e,t)},createOrderForProduct:function(e){return n.queryToCreateOrderForProduct(e)},buildCard:function(e){return n.queryBuildCard(e)},redeemableType:function(e){return n.queryRedeemableType(e)}}}])},584:function(e,n){var t="/Users/nicklandgrebe/dev/StickyBooking/src/components/occsnApp.nghtml";window.angular.module("ng").run(["$templateCache",function(e){e.put(t,"<booking-page ng-if='!order.persisted()'></booking-page>\n<complete-page ng-if='order.persisted()' order='order'></complete-page>\n")}]),e.exports=t}},[282]);
//# sourceMappingURL=sticky_booking-client_bundle.js.map